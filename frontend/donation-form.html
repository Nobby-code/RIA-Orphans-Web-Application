<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zxx">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Donate Now - RIA Orphans Foundation</title>

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="images/cropped-favicon-32x32.png"
    />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />

    <!--CSS Plugins-->
    <link rel="stylesheet" href="css/plugin.css" />
    <!-- Default CSS-->
    <link rel="stylesheet" href="css/default.css" />
    <!--Custom CSS-->
    <link rel="stylesheet" href="css/styles.css" />

    <!-- Font Awesome 4.7.0 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!-- Font Awesome 5 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <!-- Include lightGallery CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/lightgallery/css/lightgallery-bundle.min.css"
    />
  </head>
  <body>
    <!-- Header Section Start -->
    <div id="site-header"></div>
    <!-- Header Section End -->

    <!-- Breadcrumb Section Starts -->
    <section class="breadcrumb position-relative mb-0">
      <div class="overlay"></div>
      <div
        class="container text-center position-absolute top-50 start-50 translate-middle"
      >
        <div class="breadcrumb-inner">
          <h2 class="white mb-0">Donate Now</h2>
        </div>
      </div>
    </section>
    <!-- Breadcrumb Section Ends -->

    <!-- Donation Form Section starts -->
    <section class="donation-form1 position-relative">
      <div class="overlay bg-grey"></div>
      <div class="container position-relative">
        <div class="donation-form-inner">
          <div class="row align-items-center gx-lg-5">
            <div class="col-lg-6">
              <div class="donation-form-left">
                <span class="h4 fw-bold playfair blue">Donation Form</span>
                <h2 class="mb-3">Your Gift Changes a Life Today</h2>
                <p class="mb-4">
                  Every contribution brings food, clean water, education, and
                  healthcare to families who need it most. Give once, or make it
                  monthly to create lasting change.
                </p>
                <a href="cause-list.html" class="btn-primary mt-2"
                  >See Programs</a
                >
              </div>
            </div>
            <div class="col-lg-6">
              <div class="donation-form-right">
                <h4 class="fw-bold mb-1">Make a Donation</h4>
                <p class="text-secondary mb-3">
                  Enter an amount to make a donation.
                </p>
                <div class="row g-3">
                  <div class="col-4">
                    <label class="fw-bold playfair h5" for="currency"
                      >Currency</label
                    >
                    <select
                      id="currency"
                      class="bg-white"
                      aria-label="Currency"
                    >
                      <option value="USD" selected>USD</option>
                      <option value="EUR">EUR</option>
                      <option value="GBP">GBP</option>
                      <option value="NPR">NPR</option>
                      <option value="INR">KES</option>
                    </select>
                  </div>
                  <div class="col-8">
                    <label class="fw-bold playfair h5" for="otherAmount"
                      >Other Amount</label
                    >
                    <div class="input-group">
                      <span
                        class="input-group-text bg-secondary white"
                        id="currencySymbol"
                        >$</span
                      >
                      <input
                        id="otherAmount"
                        type="number"
                        min="1"
                        step="1"
                        class="form-control bg-white"
                        placeholder="e.g., 75"
                        aria-describedby="currencySymbol"
                      />
                    </div>
                  </div>
                </div>

                <div class="form-check form-switch mt-3">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    id="monthly"
                  />
                  <label class="form-check-label" for="monthly"
                    >Make this a <strong>monthly</strong> donation</label
                  >
                </div>

                <div class="row mt-3 g-3">
                  <div class="col-md-6">
                    <label class="fw-bold playfair h5" for="designation"
                      >Designation</label
                    >
                    <select id="designation" class="bg-white">
                      <option selected>Where it’s needed most</option>
                      <option>Food & Nutrition</option>
                      <option>Education</option>
                      <option>Healthcare</option>
                      <option>Clean Water</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label class="fw-bold playfair h5" for="tribute"
                      >Give in honor of</label
                    >
                    <input
                      id="tribute"
                      type="text"
                      class="bg-white"
                      placeholder="Name (optional)"
                    />
                  </div>
                </div>

                <!-- Donor Info -->
                <div class="donr-info my-4">
                  <h4 class="mb-3">Donor Infomation</h4>
                  <div class="row g-3">
                    <div class="col-md-6">
                      <input
                        id="fname"
                        type="text"
                        placeholder="First Name"
                        class="bg-white"
                        required
                      />
                    </div>
                    <div class="col-md-6">
                      <input
                        id="lname"
                        type="text"
                        placeholder="Last Name"
                        class="bg-white"
                        required
                      />
                    </div>
                    <div class="col-12">
                      <input
                        id="email"
                        type="email"
                        placeholder="Email Address"
                        class="bg-white"
                        required
                      />
                    </div>
                  </div>
                </div>

                <div class="donation-btns mt-4">
                  <button id="paypalBtn" class="btn-primary w-100 mb-3">
                    Donate with PayPal
                  </button>
                  <button id="stripeBtn" class="btn-secondary w-100 mb-3">
                    Donate with Stripe
                  </button>
                  <button id="mpesaBtn" class="btn-primary w-100">
                    Donate with M-Pesa
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Donation Form Section ends -->

    <!-- Volunteer Banner Section Start -->
    <section class="volunteer-banner position-relative z-1">
      <div class="overlay"></div>
      <div class="container position-relative">
        <div
          class="volunteer-banner-inner white pb-8 text-center text-lg-start"
        >
          <div class="row align-items-center gy-5">
            <div class="col-lg-8">
              <div class="volunteer-banner-left">
                <span class="h4 fw-bold playfair">Volunteer With us</span>
                <h2 class="mt-1 mb-3">
                  Charity activities are taken place around the world
                </h2>
                <p class="mb-0">
                  'Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Distinctio quo est porro hic placeat sequi repellendus nemo?
                  Doloremque, provident!
                </p>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="volunteer-banner-right text-center text-lg-end">
                <a href="volunteer.html" class="btn-primary">Read More</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Volunteer Banner Section End -->

    <!-- Faq Section Start -->
    <section class="faq pt-0 position-relative bg-light">
      <div class="container">
        <div class="faq-inner position-relative z-2" style="margin-top: -100px">
          <div class="row gx-lg-5 gy-5 gy-lg-0">
            <div class="col-lg-6 order-2 order-lg-1">
              <div class="faq-left">
                <img
                  src="images/teen-volunteer-girl-2021-08-27-09-31-01-utc.jpg"
                  alt="volunteer-girl"
                  class="w-100"
                />
              </div>
            </div>
            <div class="col-lg-6 order-1 order-lg-2 m-0">
              <div class="faq-right text-center text-lg-start">
                <span class="h4 fw-bold playfair white">Faq</span>
                <h2 class="mt-1 mb-5">We Need Your Help</h2>
                <div class="faq-accordion text-start">
                  <div class="accordion" id="accordionExample2">
                    <div class="accordion-item rounded-0 mb-2 border-0">
                      <h2 class="accordion-header">
                        <button
                          class="accordion-button rounded-0 bg-grey fw-bold shadow-none p-4 mb-0 h5 text-capitalize"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseOne"
                          aria-expanded="true"
                          aria-controls="collapseOne"
                        >
                          01. What does your charity do?
                        </button>
                      </h2>
                      <div
                        id="collapseOne"
                        class="accordion-collapse collapse show"
                        data-bs-parent="#accordionExample2"
                      >
                        <div class="accordion-body text">
                          We work to provide education, healthcare, and
                          essential support for communities in need. Every
                          donation helps us create long-term impact and improve
                          lives.
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item mb-2 border-0">
                      <h2 class="accordion-header">
                        <button
                          class="accordion-button collapsed bg-grey fw-bold shadow-none p-4 mb-0 h5 text-capitalize"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseTwo"
                          aria-expanded="false"
                          aria-controls="collapseTwo"
                        >
                          02. How are donations used?
                        </button>
                      </h2>
                      <div
                        id="collapseTwo"
                        class="accordion-collapse collapse"
                        data-bs-parent="#accordionExample2"
                      >
                        <div class="accordion-body text">
                          Transparency is important to us. Your contribution
                          goes directly toward funding our programs—such as
                          these key initiatives. A small portion covers
                          essential operational costs to keep our mission
                          sustainable.
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                      <h2 class="accordion-header">
                        <button
                          class="accordion-button collapsed bg-grey fw-bold shadow-none p-4 mb-0 h5 text-capitalize"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseThree"
                          aria-expanded="false"
                          aria-controls="collapseThree"
                        >
                          03. Is my donation tax-deductible?
                        </button>
                      </h2>
                      <div
                        id="collapseThree"
                        class="accordion-collapse collapse"
                        data-bs-parent="#accordionExample2"
                      >
                        <div class="accordion-body text">
                          Yes. We are a registered nonprofit organization, and
                          all donations are tax-deductible to the extent allowed
                          by law. After donating, you’ll receive a receipt for
                          your records.
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item border-0 mb-2">
                      <h2 class="accordion-header">
                        <button
                          class="accordion-button collapsed bg-grey fw-bold shadow-none p-4 mb-0 h5 text-capitalize"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseFour"
                          aria-expanded="false"
                          aria-controls="collapseFour"
                        >
                          04. Can I make a monthly donation?
                        </button>
                      </h2>
                      <div
                        id="collapseFour"
                        class="accordion-collapse collapse"
                        data-bs-parent="#accordionExample2"
                      >
                        <div class="accordion-body text">
                          Absolutely! Monthly giving helps us plan ahead and
                          provide continuous support. You can easily set up a
                          recurring donation through our secure platform.
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item border-0 rounded-0">
                      <h2 class="accordion-header">
                        <button
                          class="accordion-button rounded-0 collapsed bg-grey fw-bold shadow-none p-4 mb-0 h5 text-capitalize"
                          type="button"
                          data-bs-toggle="collapse"
                          data-bs-target="#collapseFive"
                          aria-expanded="false"
                          aria-controls="collapseFive"
                        >
                          05. How can I volunteer or get involved?
                        </button>
                      </h2>
                      <div
                        id="collapseFive"
                        class="accordion-collapse collapse"
                        data-bs-parent="#accordionExample2"
                      >
                        <div class="accordion-body text">
                          We welcome passionate volunteers! You can join us by
                          helping at events, spreading awareness online, or
                          contributing your skills. Visit our website to get
                          started.
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Faq Section End -->

    <!-- Involvement Banner Starts -->
    <section class="involvement-banner py-5">
      <div class="container">
        <div class="involvement-banner-inner text-center text-lg-start">
          <div class="row align-items-center gy-4">
            <div class="col-lg-8">
              <div class="involvement-banner-left">
                <ul
                  class="list-unstyled d-flex flex-column flex-lg-row align-items-center gap-4"
                >
                  <li>
                    <span
                      class="bg-white rounded-circle d-flex align-items-center justify-content-center"
                      ><img
                        src="images/handshake.png"
                        alt="handshake icon"
                        class=""
                    /></span>
                  </li>
                  <li>
                    <h3 class="mb-0 white">
                      Best Way ot Make a Difference in the Lives of Others
                    </h3>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="involvement-banner-right text-lg-end">
                <a href="contact.html" class="btn-primary">Get Involved Now</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Involvement Banner Starts -->

    <!-- Footer Starts -->
    <div id="site-footer"></div>
    <!-- Footer Ends -->

    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/plugin.js"></script>
    <script src="js/main.js"></script>

    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AbPqzJcms603Rh6TxzwOI3pXkJj1FX_WWexLSSg6j5m_Kh9neN_jLXxlvxBasQd0OBq3T6SUgwqyvuV9&currency=USD"></script>
    <script>
      document.getElementById("paypalBtn").onclick = function () {
        const amount = document.getElementById("otherAmount").value;
        if (!amount) return alert("Enter amount first");

        window.location.href = `https://www.paypal.com/donate?hosted_button_id=Z6ZMSTC8CZTVQ&amount=${amount}`;
      };
    </script>

    <!-- Stripe payment-->
    <script>
      document.getElementById("stripeBtn").onclick = function () {
        const amount = document.getElementById("otherAmount").value;
        if (!amount) return alert("Enter amount first");

        // Redirect to Stripe Payment Link
        window.location.href = "https://buy.stripe.com/YOUR_PAYMENT_LINK";
      };
    </script>

    <!-- M-Pesa payment-->
    <!-- <script>
      document.getElementById("mpesaBtn").onclick = function () {
        const amount = document.getElementById("otherAmount").value;
        if (!amount) return alert("Enter amount first");

        // Redirect to M-Pesa STK Push Page
        window.location.href =
          "https://pay.pesapal.com/YOUR_MPESA_CHECKOUT_LINK";
      };
    </script> -->
    <script>
      // --- MPESA BUTTON CLICK HANDLER ---
      document
        .getElementById("mpesaBtn")
        .addEventListener("click", async function () {
          const amount = document.getElementById("otherAmount").value;
          const phone = prompt("Enter your M-Pesa number (07XXXXXXXX)");

          if (!amount || amount <= 0) {
            alert("Please enter a valid amount.");
            return;
          }

          if (!phone || phone.length < 10) {
            alert("Please enter a valid Safaricom phone number.");
            return;
          }

          const payload = {
            amount: amount,
            phone: phone,
            fname: document.getElementById("fname").value,
            lname: document.getElementById("lname").value,
            email: document.getElementById("email").value,
            monthly: document.getElementById("monthly").checked,
            currency: document.getElementById("currency").value,
            designation: document.getElementById("designation").value,
            tribute: document.getElementById("tribute").value,
          };

          // Disable the button while processing
          const mpesaBtn = document.getElementById("mpesaBtn");
          mpesaBtn.innerText = "Processing...";
          mpesaBtn.disabled = true;

          try {
            const response = await fetch(
              "https://7194cd9ee5ad.ngrok-free.app/api/mpesa/stkpush",
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload),
              }
            );

            const data = await response.json();

            if (data.success) {
              alert("Please check your phone to complete the M-Pesa payment.");
            } else {
              alert("Payment error: " + data.message);
            }
          } catch (err) {
            alert("Network error: " + err.message);
          }

          // Reset button
          mpesaBtn.innerText = "Donate with M-Pesa";
          mpesaBtn.disabled = false;
        });
    </script>
    <!-- <script>
      // Currency symbol update
      document.getElementById("currency").addEventListener("change", function () {
        const currency = this.value;
        let symbol = "$"; // Default USD

        switch (currency) {
          case "EUR":
            symbol = "€";
            break;
          case "GBP":
            symbol = "£";
            break;
          case "NPR":
            symbol = "₨";
            break;
          case "INR":
            symbol = "₹";
            break;
          // Add more currencies as needed
        }

        document.getElementById("currencySymbol").innerText = symbol;
      });
    </script> -->
    <script src="js/layout.js"></script>
    <script>
      const params = new URLSearchParams(window.location.search);
      const type = params.get("type"); // orphan | widow
      const id = params.get("id");

      if (!type || !id) {
        alert("Invalid donation link");
        window.location.href = "orphans.html";
      }

      async function loadDonationTarget() {
        let res;

        if (type === "orphan") {
          res = await getOrphanById(id);
        } else if (type === "widow") {
          res = await getWidowById(id);
        }

        if (!res.success) {
          alert("Failed to load donation details");
          return;
        }

        const person = res.data;

        document.getElementById("donationName").innerText = person.name;
        document.getElementById("donationImage").src = person.image;
      }
      loadDonationTarget();
    </script>
  </body>
</html>
